<?php
$countries = array(
	'' => 'Country',
	'Afghanistan' => 'Afghanistan',
	'Albania' => 'Albania',
	'Algeria' => 'Algeria',
	'American Samoa' => 'American Samoa',
	'Andorra' => 'Andorra',
	'Angola' => 'Angola',
	'Anguilla' => 'Anguilla',
	'Antartica' => 'Antartica',
	'Antigua and Barbuda' => 'Antigua and Barbuda',
	'Argentina' => 'Argentina',
	'Armenia' => 'Armenia',
	'Aruba' => 'Aruba',
	'Australia' => 'Australia',
	'Austria' => 'Austria',
	'Azerbaijan' => 'Azerbaijan',
	'Bahamas' => 'Bahamas',
	'Bahrain' => 'Bahrain',
	'Bangladesh' => 'Bangladesh',
	'Barbados' => 'Barbados',
	'Belarus' => 'Belarus',
	'Belgium' => 'Belgium',
	'Belize' => 'Belize',
	'Benin' => 'Benin',
	'Bermuda' => 'Bermuda',
	'Bhutan' => 'Bhutan',
	'Bolivia' => 'Bolivia',
	'Bosnia and Herzegowina' => 'Bosnia and Herzegowina',
	'Botswana' => 'Botswana',
	'Bouvet Island' => 'Bouvet Island',
	'Brazil' => 'Brazil',
	'British Indian Ocean Territory' => 'British Indian Ocean Territory',
	'Brunei Darussalam' => 'Brunei Darussalam',
	'Bulgaria' => 'Bulgaria',
	'Burkina Faso' => 'Burkina Faso',
	'Burundi' => 'Burundi',
	'Cambodia' => 'Cambodia',
	'Cameroon' => 'Cameroon',
	'Canada' => 'Canada',
	'Cape Verde' => 'Cape Verde',
	'Cayman Islands' => 'Cayman Islands',
	'Central African Republic' => 'Central African Republic',
	'Chad' => 'Chad',
	'Chile' => 'Chile',
	'China' => 'China',
	'Christmas Island' => 'Christmas Island',
	'Cocos Islands' => 'Cocos Islands',
	'Colombia' => 'Colombia',
	'Comoros' => 'Comoros',
	'Congo' => 'Congo',
	'Cook Islands' => 'Cook Islands',
	'Costa Rica' => 'Costa Rica',
	'Cota D\'Ivoire' => 'Cota D\'Ivoire',
	'Croatia (Hrvatska)' => 'Croatia (Hrvatska)',
	'Cuba' => 'Cuba',
	'Cyprus' => 'Cyprus',
	'Czech Republic' => 'Czech Republic',
	'Denmark' => 'Denmark',
	'Djibouti' => 'Djibouti',
	'Dominica' => 'Dominica',
	'Dominican Republic' => 'Dominican Republic',
	'East Timor' => 'East Timor',
	'Ecuador' => 'Ecuador',
	'Egypt' => 'Egypt',
	'El Salvador' => 'El Salvador',
	'Equatorial Guinea' => 'Equatorial Guinea',
	'Eritrea' => 'Eritrea',
	'Estonia' => 'Estonia',
	'Ethiopia' => 'Ethiopia',
	'Falkland Islands (Malvinas)' => 'Falkland Islands (Malvinas)',
	'Faroe Islands' => 'Faroe Islands',
	'Fiji' => 'Fiji',
	'Finland' => 'Finland',
	'France' => 'France',
	'France Metropolitan' => 'France Metropolitan',
	'French Guiana' => 'French Guiana',
	'French Polynesia' => 'French Polynesia',
	'French Southern Territories' => 'French Southern Territories',
	'Gabon' => 'Gabon',
	'Gambia' => 'Gambia',
	'Georgia' => 'Georgia',
	'Germany' => 'Germany',
	'Ghana' => 'Ghana',
	'Gibraltar' => 'Gibraltar',
	'Greece' => 'Greece',
	'Greenland' => 'Greenland',
	'Grenada' => 'Grenada',
	'Guadeloupe' => 'Guadeloupe',
	'Guam' => 'Guam',
	'Guatemala' => 'Guatemala',
	'Guinea' => 'Guinea',
	'Guinea-Bissau' => 'Guinea-Bissau',
	'Guyana' => 'Guyana',
	'Haiti' => 'Haiti',
	'Heard and McDonald Islands' => 'Heard and McDonald Islands',
	'Holy See (Vatican City State)' => 'Holy See (Vatican City State)',
	'Honduras' => 'Honduras',
	'Hong Kong' => 'Hong Kong',
	'Hungary' => 'Hungary',
	'Iceland' => 'Iceland',
	'India' => 'India',
	'Indonesia' => 'Indonesia',
	'Iran (Islamic Republic of)' => 'Iran (Islamic Republic of)',
	'Iraq' => 'Iraq',
	'Ireland' => 'Ireland',
	'Israel' => 'Israel',
	'Italy' => 'Italy',
	'Jamaica' => 'Jamaica',
	'Japan' => 'Japan',
	'Jordan' => 'Jordan',
	'Kazakhstan' => 'Kazakhstan',
	'Kenya' => 'Kenya',
	'Kiribati' => 'Kiribati',
	'Democratic People\'s Republic of Korea' => 'Democratic People\'s Republic of Korea',
	'Korea, Republic of' => 'Korea, Republic of',
	'Kuwait' => 'Kuwait',
	'Kyrgyzstan' => 'Kyrgyzstan',
	'Lao' => 'Lao',
	'Latvia' => 'Latvia',
	'Lebanon' => 'Lebanon',
	'Lesotho' => 'Lesotho',
	'Liberia' => 'Liberia',
	'Libyan Arab Jamahiriya' => 'Libyan Arab Jamahiriya',
	'Liechtenstein' => 'Liechtenstein',
	'Lithuania' => 'Lithuania',
	'Luxembourg' => 'Luxembourg',
	'Macau' => 'Macau',
	'Macedonia, The Former Yugoslav Republic of' => 'Macedonia, The Former Yugoslav Republic of',
	'Madagascar' => 'Madagascar',
	'Malawi' => 'Malawi',
	'Malaysia' => 'Malaysia',
	'Maldives' => 'Maldives',
	'Mali' => 'Mali',
	'Malta' => 'Malta',
	'Marshall Islands' => 'Marshall Islands',
	'Martinique' => 'Martinique',
	'Mauritania' => 'Mauritania',
	'Mauritius' => 'Mauritius',
	'Mayotte' => 'Mayotte',
	'Mexico' => 'Mexico',
	'Micronesia' => 'Micronesia',
	'Moldova' => 'Moldova',
	'Monaco' => 'Monaco',
	'Mongolia' => 'Mongolia',
	'Montserrat' => 'Montserrat',
	'Morocco' => 'Morocco',
	'Mozambique' => 'Mozambique',
	'Myanmar' => 'Myanmar',
	'Namibia' => 'Namibia',
	'Nauru' => 'Nauru',
	'Nepal' => 'Nepal',
	'Netherlands' => 'Netherlands',
	'Netherlands Antilles' => 'Netherlands Antilles',
	'New Caledonia' => 'New Caledonia',
	'New Zealand' => 'New Zealand',
	'Nicaragua' => 'Nicaragua',
	'Niger' => 'Niger',
	'Nigeria' => 'Nigeria',
	'Niue' => 'Niue',
	'Norfolk Island' => 'Norfolk Island',
	'Northern Mariana Islands' => 'Northern Mariana Islands',
	'Norway' => 'Norway',
	'Oman' => 'Oman',
	'Pakistan' => 'Pakistan',
	'Palau' => 'Palau',
	'Panama' => 'Panama',
	'Papua New Guinea' => 'Papua New Guinea',
	'Paraguay' => 'Paraguay',
	'Peru' => 'Peru',
	'Philippines' => 'Philippines',
	'Pitcairn' => 'Pitcairn',
	'Poland' => 'Poland',
	'Portugal' => 'Portugal',
	'Puerto Rico' => 'Puerto Rico',
	'Qatar' => 'Qatar',
	'Reunion' => 'Reunion',
	'Romania' => 'Romania',
	'Russia' => 'Russia',
	'Rwanda' => 'Rwanda',
	'Saint Kitts and Nevis' => 'Saint Kitts and Nevis',
	'Saint LUCIA' => 'Saint LUCIA',
	'Saint Vincent' => 'Saint Vincent',
	'Samoa' => 'Samoa',
	'San Marino' => 'San Marino',
	'Sao Tome and Principe' => 'Sao Tome and Principe',
	'Saudi Arabia' => 'Saudi Arabia',
	'Senegal' => 'Senegal',
	'Seychelles' => 'Seychelles',
	'Sierra' => 'Sierra',
	'Singapore' => 'Singapore',
	'Slovakia' => 'Slovakia',
	'Slovenia' => 'Slovenia',
	'Solomon Islands' => 'Solomon Islands',
	'Somalia' => 'Somalia',
	'South Africa' => 'South Africa',
	'South Georgia' => 'South Georgia',
	'Span' => 'Span',
	'SriLanka' => 'SriLanka',
	'St. Helena' => 'St. Helena',
	'St. Pierre and Miguelon' => 'St. Pierre and Miguelon',
	'Sudan' => 'Sudan',
	'Suriname' => 'Suriname',
	'Svalbard and Jan Mayen Islands' => 'Svalbard and Jan Mayen Islands',
	'Swaziland' => 'Swaziland',
	'Sweden' => 'Sweden',
	'Switzerland' => 'Switzerland',
	'Syrian Arab Republic' => 'Syrian Arab Republic',
	'Taiwan' => 'Taiwan',
	'Tajikistan' => 'Tajikistan',
	'Tanzania, United Republic of' => 'Tanzania, United Republic of',
	'Thailand' => 'Thailand',
	'Togo' => 'Togo',
	'Tokelau' => 'Tokelau',
	'Tonga' => 'Tonga',
	'Trinidad and Tobago' => 'Trinidad and Tobago',
	'Tunisia' => 'Tunisia',
	'Turkey' => 'Turkey',
	'Turkmenistan' => 'Turkmenistan',
	'Turks and Caicos Islands' => 'Turks and Caicos Islands',
	'Tuvalu' => 'Tuvalu',
	'Uganda' => 'Uganda',
	'Ukraine' => 'Ukraine',
	'United Arab Emirates' => 'United Arab Emirates',
	'United Kingdom' => 'United Kingdom',
	'United States' => 'United States',
	'United States Minor Outlying Islands' => 'United States Minor Outlying Islands',
	'Uruguay' => 'Uruguay',
	'Uzbekistan' => 'Uzbekistan',
	'Vanuatu' => 'Vanuatu',
	'Venezuela' => 'Venezuela',
	'Viet Nam' => 'Viet Nam',
	'Virgin Islands (British)' => 'Virgin Islands (British)',
	'Virgin Islands (U.S)' => 'Virgin Islands (U.S)',
	'Wallis and Futuna Islands' => 'Wallis and Futuna Islands',
	'Western Sahara' => 'Western Sahara',
	'Yemen' => 'Yemen',
	'Yugoslavia' => 'Yugoslavia',
	'Zambia' => 'Zambia',
	'Zimbabwe' => 'Zimbabwe',
);
?>



<div id="place-form">

<form class="form-step  box-tips">
    <div class="row-fluid">
        <div class="span12">
            <div class="span3">
                <img src="<?php echo FRONT_SITE_URL ?>www/images/img.jpg" class="imgtips"/>
            </div>
            <div class="span9">
                <div class="pull-left">
                    <div class="row">
                        <icon class="icon-place"></icon>
                        <input type="text" placeholder="<?php echo t('Type your business name') ?>" id="business-search"
               value="<?php echo !empty($placeInfo) ? $placeInfo->name : ''; ?>"/>
                        <icon class="icon-star"></icon>

                        <span id="business-search-error"><p></p></span>
                    </div>

                    <div class="row">
                        <icon class="icon-address"></icon>
                        <input type="text" placeholder="<?php echo t('Address') ?>" id="address"
               value="<?php echo !empty($placeInfo) ? $placeInfo->formattedAddress : ''; ?>"/>

                        <span id="address-error"><p></p></span>
                    </div>

                    <div class="row">
                        <icon class="icon-country"></icon>
                        <select name="baby_bear" class="baby_bear dd" id="country">
                            <?php foreach($countries as $country) : ?>
                                    <option value="<?php echo $country ?>"<?php if($country == $placeInfo->country) echo 'selected' ?>><?php echo $country ?></option>
                            <?php endforeach; ?>
                        </select>

                        <input type="hidden" value="<?php echo $placeInfo->googleReference ?>" id="googleReference" />
                        <input type="hidden" value="<?php echo $placeInfo->placeId ?>" id="placeId" />
                        <input type="hidden" value="<?php echo $placeInfo->placeType ?>" id="placeType" />
                    </div>
                </div>
                <div class="pull-right">
                    <div class="row">
                        <icon class="icon-blank"></icon>
                        <img src="<?php echo FRONT_SITE_URL ?>www/images/save-new-place.png" id="btn-submit">
                    </div>

                    <div class="row">
                        <icon class="icon-city"></icon>
                        <input type="text" placeholder="<?php echo t('City') ?>" id="city"
                            value="<?php echo !empty($placeInfo) ? $placeInfo->city : ''; ?>"/>
                        <span id="city-error"><p></p></span>
                    </div>

                    <div class="row">
                        <icon class="icon-zipcode"></icon>
                        <input type="text" placeholder="<?php echo t('Zip') ?>" id="zip"
                                value="<?php echo !empty($placeInfo) ? $placeInfo->zip : ''; ?>"/>
                         <span id="zip-error"><p></p></span>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <div>
        <div class="line-tip" id="print-leaflet">
            <?php if (!isset($this->placeId)) : ?>
                <img src="<?php echo FRONT_SITE_URL ?>www/images/print.jpg"/>
        </div>
        <?php else : ?>
            <img
                src="<?php echo CommonHelper::generateQRCode(app()->createAbsoluteUrl('/place/index', array('id' => $this->placeId)), 100, 100) ?>"/>
        <?php
        endif;
        ?>
    </div>

    <div class="row-fluid">
        <div class="span12">
            <div class="span3 left-tip">
            	<?php /*<div class="row">
            	 <img src="<?php echo FRONT_SITE_URL ?>www/images/my-place.png"/>
                 </div> */ ?>
                 <div class="row">
                <img style=" width: 75px;height: 67px; "
                             src="<?php echo isset($placeInfo->logo) ? $placeInfo->logo : FRONT_SITE_URL . 'www/images/iamges.jpg' ?>"
                             id="logo-thumb"/>
                <img src="" style="display: none" id="logo-thumb-real">
                </div>
            </div>
            <div class="span9">
                <div class="pull-left no-cion">
                    <?php /*<div class="row" style="margin-top:15px;">
                    	<?php echo CHtml::dropDownList('cat', '', $category, array('options' => array($placeInfo->category => array('selected' => true)), 'placeholder' => t('Category'), 'style' => 'width:269px;height:40px;')) ?>
                        <img src="<?php echo FRONT_SITE_URL ?>www/images/icon10.jpg" />
                    </div>*/ ?>
                    <div class="row" style="margin-top:17px;">
                        <p><?php echo t('Upload your company image, ogotype or trademark.') ?></p>
                        <div class="upload_avatar">
                            <button class="button" type="button">
                                <?php echo t('Upload') ?> </span>
                            </button>
                            <input type="file" class="no-uniform" name="file-logo" id="logo">
                            <p><?php echo t('Upload files .jpeg, .tif, <br>.bmp, .eps (max 400x400 - 150 dpi)'); ?></p>
                            <span id="logo-error"><p></p></span>
                        </div>
                    </div>
                </div>
                <div class="pull-right">
                    <div class="row">
                        <icon class="icon-clock"></icon>
                        <input style="width: 250px" type="text" placeholder="<?php echo t('Coordinate') ?>" id="place-search" readonly="true"
                               value="<?php echo !empty($placeInfo) ? $placeInfo->location->latitude . ',' . $placeInfo->location->longitude : '' ?>"/>

                        <img src="<?php echo FRONT_SITE_URL ?>www/images/icon9.jpg" id="google-map-btn"/>
                        <span id="place-search-error"><p></p></span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</form>

<?php
// dialog show static map with marker
$this->beginWidget('zii.widgets.jui.CJuiDialog', array(
    'id' => 'dialog_1',
    // additional javascript options for the dialog plugin
    'options' => array(
        'title' => 'Review your location',
        'autoOpen' => false,
        // 'modal' => true,
        'width' => '700',
        'height' => '600',
        'draggable' => false,

    ),
    'htmlOptions' => array(
        'style' => 'z-index:1000',
    )
));
?>

<div id="google-static-map" style="width: 670px;height: 480px"></div>
<?php
$this->endWidget('zii.widgets.jui.CJuiDialog');
?>


<?php
// dynamic map have input box for user select position
$this->beginWidget('zii.widgets.jui.CJuiDialog', array(
    'id' => 'dialog_2',
    // additional javascript options for the dialog plugin
    'options' => array(
        'title' => 'Select your position',
        'autoOpen' => false,
        //    'modal' => false,
        'width' => '700',
        'height' => '600',
        'draggable' => false,
        'resizable'=>'false',
        'show' => array(
            'effect' => 'fade',
            'duration' => 300,
        ),
        'hide' => array(
            'effect' => 'fade',
            'duration' => 300,
        )
    ),
    'htmlOptions' => array(
        'style' => 'z-index:800',
    )
));
?>
<div class="controls">
    <input type="text" size="100" id="search-text" />
    <input type="text" id="lat-lng" readonly="true" />
    <input type="button" value="<?php echo t('Save') ?>" id="save-lat-lng" style="margin-top: -10px" class="btn" />
</div>

<div id="google-dynamic-map" style="width: 670px;height: 480px"></div>
<?php
$this->endWidget('zii.widgets.jui.CJuiDialog');
?>


<?php
// dialog show the review of leaflet
$this->beginWidget('zii.widgets.jui.CJuiDialog', array(
    'id' => 'leaflet-dialog',
    // additional javascript options for the dialog plugin
    'options' => array(
        'title' => t('Print your Leaflet'),
        'autoOpen' => false,
        // 'modal' => true,
        'width' => '872',
        'height' => '600',
        'draggable' => false,
        'resizable'=>'false',
        'show' => array(
            'effect' => 'fade',
            'duration' => 350,
        ),
        'hide' => array(
            'effect' => 'fade',
            'duration' => 350,
        )),
    'htmlOptions' => array(
        'style' => 'z-index:1000',
    )
));
?>

<form action="<?php echo app()->createUrl('/place/downloadpdf') ?>" method="POST" id="download-pdf-form" target="_blank"
      name="download-pdf-form">
    <div id="leaflet-info"></div>
    <div style="padding:10px 20px; background:#fae5f2;">
        <input type="button" class="btn" id="download-btn" value="<?php echo t('Download PDF') ?>">
        <input type="hidden" id="html_string" name="html_string" value="">
    </div>
</form>
<?php
$this->endWidget();
?>

</div>
<script type="text/javascript" src="<?php echo FRONT_SITE_URL ?>www/app/models/place.js"></script>
<script type="text/javascript" src="<?php echo FRONT_SITE_URL ?>www/app/views/place/place.js"></script>
<script type="text/javascript" src="<?php echo FRONT_SITE_URL ?>www/app/helper/util.js"></script>
<script>
    var saveUrl = '<?php echo app()->createUrl("/place/save") ?>';
    var indexUrl = '<?php echo app()->createUrl("/place/index") ?>'
    var country = '<?php echo!empty($placeInfo->country) ? $placeInfo->country : '' ?>';
    var placeName = '<?php echo!empty($placeInfo->name) ? $placeInfo->name : '' ?>';
    var qrCodeUrl = '<?php echo!empty($placeInfo) ? CommonHelper::generateQRCode(app()->createAbsoluteUrl('/place/qr', array('id' => $placeInfo->objectId))) : '' ?>';
    var placeView = null;
    var defaultImage = '<?php echo FRONT_SITE_URL?>' + 'www/images/iamges.jpg';

    // change the contry if the country is saved
    $(document).ready(function () {
        var place = new Place();

        place.set({
            objectId : '<?php echo!empty($placeInfo) ? $placeInfo->objectId : ''; ?>',
            objId : '<?php echo!empty($placeInfo) ? $placeInfo->objectId : ''; ?>',
            placeId: '<?php echo!empty($placeInfo) ? $placeInfo->placeId : ''; ?>',
            name: '<?php echo!empty($placeInfo) ? $placeInfo->name : ''; ?>',
            address: '<?php echo!empty($placeInfo) ? $placeInfo->formattedAddress : '' ?>',
            location: '<?php echo!empty($placeInfo) ? $placeInfo->location->latitude . ',' . $placeInfo->location->longitude : '' ?>',
            city: '<?php echo!empty($placeInfo) ? $placeInfo->city : '' ?>',
            zip: '<?php echo!empty($placeInfo) ? $placeInfo->zip : '' ?>',
            country: '<?php echo!empty($placeInfo) ? $placeInfo->country : '' ?>',
            avatar: '<?php echo!empty($placeInfo) ? $placeInfo->logo : '' ?>',
            googleReference : '<?php echo!empty($placeInfo) ? $placeInfo->googleReference : '' ?>',
            placeType : '<?php echo!empty($placeInfo) ? $placeInfo->placeType : '' ?>'
        });
        placeView = new PlaceView({model: place});
        $('#business-search').focus();

    });
</script>
